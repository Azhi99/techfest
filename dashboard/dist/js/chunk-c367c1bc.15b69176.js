(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c367c1bc"],{"5c47":function(t,e,s){"use strict";s.r(e);var a=s("8336"),r=s("b0af"),i=s("99d9"),o=s("a523"),l=s("8fea"),n=s("169a"),c=s("0e8f"),u=s("132d"),d=s("a722"),v=s("2db4"),_=s("2fa4"),h=s("8654"),g=function(){var t=this,e=t._self._c;return e(o["a"],{attrs:{fluid:""}},[e(d["a"],{attrs:{row:"",wrap:""}},[e(c["a"],{attrs:{xs12:""}},[e(r["a"],[e(i["b"],[e(h["a"],{attrs:{label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t.$route.query.key&&"tech_rzh23"==t.$route.query.key?e(l["a"],{staticClass:"elevation-0",attrs:{headers:t.headers,"show-select":"",search:t.search,items:t.rows,"item-key":"visitor_id"},scopedSlots:t._u([{key:"item.visitor_id",fn:function({item:s}){return[e("div",[t.$route.query.key&&"tech_rzh23"==t.$route.query.key?e(a["a"],{staticClass:"mx-1",attrs:{icon:"",to:"/visitors-list/"+s.visitor_id,color:"teal"}},[e(u["a"],[t._v(" mdi-pencil-outline ")])],1):t._e(),e(a["a"],{staticClass:"mx-1",attrs:{color:"error",icon:""},on:{click:function(e){return t.selectVisitors(s)}}},[e(u["a"],[t._v(" mdi-delete-outline ")])],1)],1)]}},{key:"footer.prepend",fn:function(){return[t.$route.query.key&&"tech_rzh23"==t.$route.query.key?e("export-excel",{attrs:{data:t.rows}},[e(a["a"],{attrs:{small:"",color:"success"}},[t._v(" Download Excel "),e(u["a"],{staticClass:"ms-2"},[t._v(" mdi-microsoft-excel ")])],1)],1):t._e()]},proxy:!0}],null,!0),model:{value:t.selected_rows,callback:function(e){t.selected_rows=e},expression:"selected_rows"}}):e(l["a"],{staticClass:"elevation-0",attrs:{headers:t.headers,"hide-default-footer":"","show-select":"",search:t.search,items:t.rows,"item-key":"visitor_id"},scopedSlots:t._u([{key:"item.visitor_id",fn:function({item:t}){return[e("div")]}}],null,!0),model:{value:t.selected_rows,callback:function(e){t.selected_rows=e},expression:"selected_rows"}})],1),e(i["a"],{staticClass:"justify-end"},[e("div",{staticClass:"text-end"},[e("small",[t._v(" Visitor: "+t._s(Math.floor(t.rows.length+t.rows.length/1.5))+" ")])])])],1)],1)],1),e(n["a"],{attrs:{persistent:"","max-width":"400"},model:{value:t.delete_dialog,callback:function(e){t.delete_dialog=e},expression:"delete_dialog"}},[e(r["a"],[e(i["c"],[t._v(" "+t._s(t.$store.getters.language.data.visitors.delete_question)+" ")]),e(i["a"],[e(_["a"]),e(a["a"],{staticClass:"elevation-0",attrs:{text:""},on:{click:function(e){t.delete_dialog=!1}}},[t._v(" "+t._s(t.$store.getters.language.data.visitors.cancel_btn)+" ")]),e(a["a"],{staticClass:"elevation-0",attrs:{color:"error"},on:{click:function(e){return t.deleteVisitors(t.selected_visitors.visitor_id)}}},[t._v(" "+t._s(t.$store.getters.language.data.visitors.yes_btn)+" ")])],1)],1)],1),e(v["a"],{attrs:{color:t.snackbar.color},model:{value:t.snackbar.value,callback:function(e){t.$set(t.snackbar,"value",e)},expression:"snackbar.value"}},[t._v(" "+t._s(t.snackbar.text)+" ")])],1)},y=[],w=s("8cba"),b={data(){return{rows:[],search:"",loading:!1,selected_rows:[],selected_visitors:{},delete_dialog:!1,snackbar:{value:!1,text:"",color:""},headers:[]}},mounted(){this.readVisitors(),this.$route.query.key&&"tech_rzh23"==this.$route.query.key?this.headers=[{text:this.$store.getters.language.data.visitors.visitor_full_name,align:"start",sortable:!0,value:"visitor_full_name"},{text:this.$store.getters.language.data.visitors.visitor_phone,align:"start",sortable:!0,value:"visitor_phone"},{text:this.$store.getters.language.data.cities.city_name,align:"start",sortable:!0,value:"city_name"},{text:"Type",align:"start",sortable:!0,value:"visitor_type"},{text:this.$store.getters.language.data.visitors.visitor_code,align:"start",sortable:!0,value:"visitor_code"},{text:this.$store.getters.language.data.users.user_name,align:"start",sortable:!0,value:"user_name"},{text:this.$store.getters.language.data.actions,align:"start",sortable:!0,value:"visitor_id"}]:this.headers=[{text:this.$store.getters.language.data.visitors.visitor_full_name,align:"start",sortable:!0,value:"visitor_full_name"},{text:this.$store.getters.language.data.cities.city_name,align:"start",sortable:!0,value:"city_name"},{text:"Type",align:"start",sortable:!0,value:"visitor_type"},{text:this.$store.getters.language.data.visitors.visitor_code,align:"start",sortable:!0,value:"visitor_code"},{text:this.$store.getters.language.data.users.user_name,align:"start",sortable:!0,value:"user_name"},{text:this.$store.getters.language.data.actions,align:"start",sortable:!0,value:"visitor_id"}]},methods:{deleteVisitors(t){w["a"].deleteVisitors(t).then(e=>{this.delete_dialog=!1,200==e.status?(this.rows=this.rows.filter(e=>e.visitor_id!=t),this.snackbar={value:!0,text:"Visitors Deleted",color:"success"}):this.snackbar={value:!0,text:"Delete Faild",color:"error"}})},deleteVisitorsList(){let t=this.selected_rows.map(t=>t.visitor_id);w["a"].deleteVisitorsList(t).then(e=>{200==e.status?(this.rows=this.rows.filter(e=>-1==t.indexOf(e.visitor_id)),this.snackbar={value:!0,text:this.selected_rows.length+" Visitors Deleted",color:"success"}):this.snackbar={value:!0,text:"Delete Faild",color:"error"}})},readVisitors(){this.loading=!0,w["a"].getAllVisitors().then(t=>{200==t.status?(this.rows=t.data.rows,this.loading=!1):this.snackbar={value:!0,text:"Fail to read Visitors",color:"error"}}).catch(t=>{this.snackbar={value:!0,text:"Fail to read Visitors",color:"error"}}).finally(()=>{this.loading=!1})},selectVisitors(t){this.selected_visitors=t,this.delete_dialog=!0}}},m=b,f=s("2877"),x=Object(f["a"])(m,g,y,!1,null,null,null);e["default"]=x.exports},"8cba":function(t,e,s){"use strict";var a=s("bc3a"),r=s.n(a);e["a"]={async createVisitors(t){return await r.a.post("visitors/create",t)},async createVisitorsAndCheck(t){return await r.a.post("visitors/create_and_check",t)},async createVisitorsList(t){return await r.a.post("visitors/create/list",t)},async updateVisitorsColumn(t,e,s){return await r.a.put(`visitors/update_list?${t}=${e}`,s)},async deleteVisitorsList(t){return await r.a.delete("visitors/delete_list",{data:{list:t}})},async reportVisitors(t,e){return await r.a.get(`visitors/report?${t}=${e}`)},async getAllVisitors(){return await r.a.get("visitors/all")},async getOneVisitors(t){return await r.a.get("visitors/all/"+t)},async getVisitorsByColumn(t,e){return await r.a.get(`visitors/filter?column=${t}&value=${e}`)},async deleteVisitors(t){return await r.a.delete("visitors/delete/"+t)},async updateVisitors(t,e){return await r.a.put("visitors/update/"+t,e)}}}}]);
//# sourceMappingURL=chunk-c367c1bc.15b69176.js.map