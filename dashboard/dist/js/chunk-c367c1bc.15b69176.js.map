{"version":3,"sources":["webpack:///./src/views/Visitors/Visitors List.vue","webpack:///src/views/Visitors/Visitors List.vue","webpack:///./src/views/Visitors/Visitors List.vue?f5e9","webpack:///./src/views/Visitors/Visitors List.vue?29e1","webpack:///./src/requests/visitors.request.js"],"names":["_c","attrs","model","callback","expression","_vm","staticClass","scopedSlots","key","selectVisitors","$route","proxy","value","selected_rows","headers","item","delete_dialog","$$v","on","color","snackbar","data","rows","search","loading","selected_visitors","text","mounted","align","sortable","methods","deleteVisitors","requests","deleteVisitorsList","readVisitors","catch","finally","component","staticRenderFns","params","axios","post","column","put","list","delete","get","visitor_id"],"mappings":"6QAAmL,aAAC,IAAGA,EAAG,KAA+CC,EAAK,EAAC,S,OAAC,SAAQ,CAAQ,MAAC,CAACC,MAAM,K,CAAoBC,SAAS,C,MAAmB,CAAW,IAAC,GAACC,UAAsB,CAAEC,EAAG,OAAO,CAAuEC,OAA0BL,KAAM,K,CAAuB,YAAa,OAAG,W,MAAC,CAAoB,MAAQI,UAAgC,MAAC,CAACE,QAAYF,OAASG,SAAK,YAAmB,EAAC,OAAS,GAAO,WAAE,Y,EAA8FF,aAAY,KAAM,2C,YAAO,c,eAAe,EAAC,Q,cAA0C,G,OAAM,S,MAAO,O,WAAoEA,c,YAA0B,EAAQ,K,yBAAiB,UAAC,K,UAA8B,SAAWG,gBAAmB,KAAC,2C,YAAA,OAAC,OAAIT,KAAG,GAAmD,kCAAG,eAAyB,UAAU,qDAAC,YAAaU,OAA6ET,MAAM,CAAC,MAAOI,QAAQ,SAAgBJ,IAAO,MAAQ,SAAE,GAAC,OAAQ,uBAAqDK,UAAW,CAAC,0CAA6D,CAACK,IAAK,iBAAO,GAAC,WAAWT,MAAM,wEAACU,MAAWC,CAAeV,KAAS,SAAsC,WAACC,MAAU,CAAgB,SAAO,kBAAgD,oCAAC,YAAcU,QAAQ,kCAAwB,gBAAkB,WAAoB,MAAO,G,MAAU,CAAwB,sBAACP,SAAW,SAAS,GAACC,EAAK,cAAgB,G,WAAeO,mB,EAAQ,OAAW,C,YAAO,cAAC,MAAG,CAAWb,QAAM,UAACU,sBAAWC,GAAeV,cAAS,G,OAAoBU,SAAiB,MAAC,OAACT,WAAW,cAAkB,YAAQ,OAAkBE,sBAA4BN,GAAG,UAAM,KAACM,IAA6JL,MAAM,cAAiB,SAAiB,MAAC,CAACC,MAAM,gBAACU,SAAU,SAACI,GAAeb,gBAAmBc,GAA2B,WAAC,oBAA2B,aAAE,YAAa,eAAyJX,SAAW,CAAeL,YAAM,Y,CAAC,UAAO,sGAAE,MAAC,CAAG,WAAC,GAAC,YAAQ,O,MAA0C,CAAC,sBAAII,SAAU,SAAQA,GAAyEC,gBAAY,GAAqB,WAAQ,kBAASY,CAAE,EAAC,8H,YAAS,c,MAAiB,CAA2D,SAAG,GAAEb,CAAyGJ,MAAM,YAAC,iBAAqBkB,K,CAAcP,KAAOP,IAAIe,KAASR,SAAM,4D,YAAU,c,MAAmB,CAAiC,MAAC,SAA4B,IAAIP,MAAO,SAAU,GACl/F,2D,wSC+Ec,GACfgB,OACA,OACAC,QACAC,UACAC,WACAX,iBACAY,qBACAT,iBACAI,UACAR,SACAc,QACAP,UAEAL,aAKAa,UACA,oBACA,2DACA,eACAD,kEACAE,cACAC,YACAjB,2BAEA,CACAc,8DACAE,cACAC,YACAjB,uBAEA,CACAc,wDACAE,cACAC,YACAjB,mBAEA,CACAc,YACAE,cACAC,YACAjB,sBAEA,CACAc,6DACAE,cACAC,YACAjB,sBAEA,CACAc,uDACAE,cACAC,YACAjB,mBAEA,CACAc,+CACAE,cACAC,YACAjB,qBAGA,eACAc,kEACAE,cACAC,YACAjB,2BAEA,CACAc,wDACAE,cACAC,YACAjB,mBAEA,CACAc,YACAE,cACAC,YACAjB,sBAEA,CACAc,6DACAE,cACAC,YACAjB,sBAEA,CACAc,uDACAE,cACAC,YACAjB,mBAEA,CACAc,+CACAE,cACAC,YACAjB,sBAKAkB,SAEAC,kBACAC,kCACA,sBACA,eACA,8BACA,iBAEA,eACApB,SACAc,wBACAP,kBAGA,eACAP,SACAc,oBACAP,kBAMAc,qBACA,8CACAD,sCACA,eACA,+BACA,4BAEA,eACApB,SACAc,mDACAP,kBAGA,eACAP,SACAc,oBACAP,kBAKAe,eACA,gBACAF,iCACA,eACA,sBACA,iBAEA,eACApB,SACAc,6BACAP,iBAIAgB,UACA,eACAvB,SACAc,6BACAP,iBAGAiB,aACA,mBAGA3B,kBACA,yBACA,yBChQsW,I,YCOlW4B,EAAY,eACd,EACA,EACAC,GACA,EACA,KACA,KACA,MAIa,aAAAD,E,6CCjBf,yBACe,QAEP,qBAAqBE,GACjB,aAAaC,IAAMC,KAAM,kBAAmBF,IAEhD,6BAA6BA,GACzB,aAAaC,IAAMC,KAAM,4BAA6BF,IAE1D,yBAAyBA,GACrB,aAAaC,IAAMC,KAAM,uBAAwBF,IAErD,2BAA2BG,EAAS9B,EAAQS,GACxC,aAAamB,IAAMG,IAAK,wBAAuBD,KAAU9B,IAAUS,IAEvE,yBAAyBuB,GACrB,aAAaJ,IAAMK,OAAQ,uBAAwB,CAC/CxB,KAAM,CACFuB,KAAKA,MAIjB,qBAAqBF,EAAS9B,GAC1B,aAAa4B,IAAMM,IAAK,mBAAkBJ,KAAU9B,MAExD,uBACI,aAAa4B,IAAMM,IAAK,iBAE5B,qBAAqBC,GACjB,aAAaP,IAAMM,IAAK,gBAAeC,IAE3C,0BAA0BL,EAAS9B,GAC/B,aAAa4B,IAAMM,IAAK,0BAAyBJ,WAAgB9B,MAErE,qBAAqBmC,GACjB,aAAaP,IAAMK,OAAQ,mBAAkBE,IAEjD,qBAAqBA,EAAaR,GAC9B,aAAaC,IAAMG,IAAK,mBAAkBI,EAAeR","file":"js/chunk-c367c1bc.15b69176.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-card',[_c('v-card-text',[_c('v-text-field',{attrs:{\"label\":\"Search\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),(_vm.$route.query.key && _vm.$route.query.key == 'tech_rzh23')?_c('v-data-table',{staticClass:\"elevation-0\",attrs:{\"headers\":_vm.headers,\"show-select\":\"\",\"search\":_vm.search,\"items\":_vm.rows,\"item-key\":\"visitor_id\"},scopedSlots:_vm._u([{key:`item.visitor_id`,fn:function({ item }){return [_c('div',[(_vm.$route.query.key && _vm.$route.query.key == 'tech_rzh23')?_c('v-btn',{staticClass:\"mx-1\",attrs:{\"icon\":\"\",\"to\":'/visitors-list/'+item.visitor_id,\"color\":\"teal\"}},[_c('v-icon',[_vm._v(\" mdi-pencil-outline \")])],1):_vm._e(),_c('v-btn',{staticClass:\"mx-1\",attrs:{\"color\":\"error\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.selectVisitors(item)}}},[_c('v-icon',[_vm._v(\" mdi-delete-outline \")])],1)],1)]}},{key:`footer.prepend`,fn:function(){return [(_vm.$route.query.key && _vm.$route.query.key == 'tech_rzh23')?_c('export-excel',{attrs:{\"data\":_vm.rows}},[_c('v-btn',{attrs:{\"small\":\"\",\"color\":\"success\"}},[_vm._v(\" Download Excel \"),_c('v-icon',{staticClass:\"ms-2\"},[_vm._v(\" mdi-microsoft-excel \")])],1)],1):_vm._e()]},proxy:true}],null,true),model:{value:(_vm.selected_rows),callback:function ($$v) {_vm.selected_rows=$$v},expression:\"selected_rows\"}}):_c('v-data-table',{staticClass:\"elevation-0\",attrs:{\"headers\":_vm.headers,\"hide-default-footer\":\"\",\"show-select\":\"\",\"search\":_vm.search,\"items\":_vm.rows,\"item-key\":\"visitor_id\"},scopedSlots:_vm._u([{key:`item.visitor_id`,fn:function({ item }){return [_c('div')]}}],null,true),model:{value:(_vm.selected_rows),callback:function ($$v) {_vm.selected_rows=$$v},expression:\"selected_rows\"}})],1),_c('v-card-actions',{staticClass:\"justify-end\"},[_c('div',{staticClass:\"text-end\"},[_c('small',[_vm._v(\" Visitor: \"+_vm._s(Math.floor(_vm.rows.length + (_vm.rows.length / 1.5)))+\" \")])])])],1)],1)],1),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"400\"},model:{value:(_vm.delete_dialog),callback:function ($$v) {_vm.delete_dialog=$$v},expression:\"delete_dialog\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" \"+_vm._s(_vm.$store.getters.language.data.visitors.delete_question)+\" \")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{staticClass:\"elevation-0\",attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.delete_dialog = false}}},[_vm._v(\" \"+_vm._s(_vm.$store.getters.language.data.visitors.cancel_btn)+\" \")]),_c('v-btn',{staticClass:\"elevation-0\",attrs:{\"color\":\"error\"},on:{\"click\":function($event){return _vm.deleteVisitors(_vm.selected_visitors.visitor_id)}}},[_vm._v(\" \"+_vm._s(_vm.$store.getters.language.data.visitors.yes_btn)+\" \")])],1)],1)],1),_c('v-snackbar',{attrs:{\"color\":_vm.snackbar.color},model:{value:(_vm.snackbar.value),callback:function ($$v) {_vm.$set(_vm.snackbar, \"value\", $$v)},expression:\"snackbar.value\"}},[_vm._v(\" \"+_vm._s(_vm.snackbar.text)+\" \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-container fluid>\r\n        <v-layout row wrap>\r\n            <v-flex xs12>\r\n                <v-card>\r\n                    <v-card-text>\r\n                        <v-text-field label=\"Search\" v-model=\"search\"></v-text-field>\r\n                        <v-data-table v-if=\"$route.query.key && $route.query.key == 'tech_rzh23'\" :headers=\"headers\" show-select v-model=\"selected_rows\"  :search=\"search\" :items=\"rows\" class=\"elevation-0\"\r\n                            item-key=\"visitor_id\">\r\n                            <template v-slot:[`item.visitor_id`]=\"{ item }\">\r\n                                <div>\r\n                                    <v-btn icon :to=\"'/visitors-list/'+item.visitor_id\"  color=\"teal\" class=\"mx-1\" v-if=\"$route.query.key && $route.query.key == 'tech_rzh23'\">\r\n                                        <v-icon> mdi-pencil-outline </v-icon>\r\n                                    </v-btn>\r\n                                    <v-btn color=\"error\" icon class=\"mx-1\" @click=\"selectVisitors(item)\" >\r\n                                        <v-icon> mdi-delete-outline </v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                            </template>\r\n                            <template v-slot:[`footer.prepend`]>\r\n                                <export-excel v-if=\"$route.query.key && $route.query.key == 'tech_rzh23'\"\r\n                                    :data=\"rows\">\r\n                                    <v-btn small color=\"success\"> Download Excel <v-icon class=\"ms-2\"> mdi-microsoft-excel </v-icon> </v-btn>\r\n                                </export-excel>\r\n                            </template>\r\n                        </v-data-table>\r\n\r\n\r\n\r\n                        <v-data-table v-else :headers=\"headers\" hide-default-footer show-select v-model=\"selected_rows\"  :search=\"search\" :items=\"rows\" class=\"elevation-0\"\r\n                            item-key=\"visitor_id\">\r\n                            <template v-slot:[`item.visitor_id`]=\"{ item }\">\r\n                                <div>\r\n                                    <!-- <v-btn icon :to=\"'/visitors-list/'+item.visitor_id\"  color=\"teal\" class=\"mx-1\" v-if=\"$route.query.key && $route.query.key == 'tech_rzh23'\">\r\n                                        <v-icon> mdi-pencil-outline </v-icon>\r\n                                    </v-btn>\r\n                                    <v-btn color=\"error\" icon class=\"mx-1\" @click=\"selectVisitors(item)\" >\r\n                                        <v-icon> mdi-delete-outline </v-icon>\r\n                                    </v-btn> -->\r\n                                </div>\r\n                            </template>\r\n                            \r\n                        </v-data-table>\r\n                    </v-card-text>\r\n                    \r\n                    <v-card-actions class=\"justify-end\">\r\n                        <div class=\"text-end\">\r\n                            <small> Visitor: {{ Math.floor(rows.length + (rows.length / 1.5)) }} </small>\r\n                        </div>\r\n                    </v-card-actions>\r\n                        \r\n                </v-card>\r\n            </v-flex>\r\n        </v-layout>\r\n        <v-dialog v-model=\"delete_dialog\" persistent max-width=\"400\">\r\n            <v-card>\r\n                <v-card-title>\r\n                    {{$store.getters.language.data.visitors.delete_question}}\r\n                </v-card-title>\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn text class=\"elevation-0\" @click=\"delete_dialog = false\">\r\n                        {{$store.getters.language.data.visitors.cancel_btn}}\r\n                    </v-btn>\r\n                    <v-btn color=\"error\" class=\"elevation-0\" @click=\"deleteVisitors(selected_visitors.visitor_id)\">\r\n                        {{$store.getters.language.data.visitors.yes_btn}}\r\n                    </v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n        <v-snackbar v-model=\"snackbar.value\" :color=\"snackbar.color\">\r\n            {{snackbar.text}}\r\n        </v-snackbar>\r\n    </v-container>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport requests from '../../requests/visitors.request'\r\nexport default {\r\n    data() {\r\n        return {\r\n            rows: [],\r\n            search: '',\r\n            loading: false,\r\n            selected_rows: [],\r\n            selected_visitors : {},\r\n            delete_dialog: false,\r\n            snackbar: {\r\n                value: false,\r\n                text: '',\r\n                color: ''\r\n            },\r\n            headers: [\r\n                \r\n            ],\r\n        }\r\n    },\r\n    mounted() {\r\n        this.readVisitors();\r\n        if(this.$route.query.key && this.$route.query.key == 'tech_rzh23') {\r\n            this.headers = [{ \r\n                text: this.$store.getters.language.data.visitors.visitor_full_name,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'visitor_full_name',\r\n            },\r\n            { \r\n                text: this.$store.getters.language.data.visitors.visitor_phone,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'visitor_phone',\r\n            },\r\n            { \r\n                text: this.$store.getters.language.data.cities.city_name,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'city_name',\r\n            },\r\n            { \r\n                text: 'Type',\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'visitor_type',\r\n            },\r\n            { \r\n                text: this.$store.getters.language.data.visitors.visitor_code,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'visitor_code',\r\n            }, \r\n            { \r\n                text: this.$store.getters.language.data.users.user_name,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'user_name',\r\n            },     \r\n            {\r\n                text: this.$store.getters.language.data.actions,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'visitor_id',\r\n            }]\r\n        } else {\r\n            this.headers = [{ \r\n                text: this.$store.getters.language.data.visitors.visitor_full_name,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'visitor_full_name',\r\n            },\r\n            { \r\n                text: this.$store.getters.language.data.cities.city_name,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'city_name',\r\n            },\r\n            { \r\n                text: 'Type',\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'visitor_type',\r\n            },\r\n            { \r\n                text: this.$store.getters.language.data.visitors.visitor_code,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'visitor_code',\r\n            }, \r\n            { \r\n                text: this.$store.getters.language.data.users.user_name,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'user_name',\r\n            },     \r\n            {\r\n                text: this.$store.getters.language.data.actions,\r\n                align: 'start',\r\n                sortable: true,\r\n                value: 'visitor_id',\r\n            }]\r\n        }\r\n    },\r\n\r\n    methods: {\r\n\r\n        deleteVisitors(visitor_id) {\r\n            requests.deleteVisitors(visitor_id).then(r => {\r\n                this.delete_dialog = false\r\n                if (r.status == 200) {\r\n                    this.rows = this.rows.filter(f =>{\r\n                        return f.visitor_id != visitor_id\r\n                    })\r\n                    this.snackbar = {\r\n                        value: true,\r\n                        text: 'Visitors Deleted',\r\n                        color: 'success'\r\n                    }\r\n                } else {\r\n                    this.snackbar = {\r\n                        value: true,\r\n                        text: 'Delete Faild',\r\n                        color: 'error'\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        \r\n        deleteVisitorsList() {\r\n            let ids = this.selected_rows.map(m => m.visitor_id)\r\n            requests.deleteVisitorsList(ids).then(r => {\r\n                if (r.status == 200) {\r\n                    this.rows = this.rows.filter(f =>{  \r\n                        return ids.indexOf(f.visitor_id) == -1\r\n                    })\r\n                    this.snackbar = {\r\n                        value: true,\r\n                        text: this.selected_rows.length+' Visitors Deleted',\r\n                        color: 'success'\r\n                    }\r\n                } else {\r\n                    this.snackbar = {\r\n                        value: true,\r\n                        text: 'Delete Faild',\r\n                        color: 'error'\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        readVisitors() {\r\n            this.loading = true\r\n            requests.getAllVisitors().then(r => {\r\n                if (r.status == 200) {\r\n                    this.rows = r.data.rows\r\n                    this.loading = false\r\n                } else {\r\n                    this.snackbar = {\r\n                        value: true,\r\n                        text: 'Fail to read Visitors',\r\n                        color: 'error'\r\n                    }\r\n                }\r\n            })\r\n            .catch(e => {\r\n                this.snackbar = {\r\n                    value: true,\r\n                    text: 'Fail to read Visitors',\r\n                    color: 'error'\r\n                }\r\n            })\r\n            .finally(() => {\r\n                this.loading = false\r\n            })\r\n        },\r\n        selectVisitors(i) {\r\n            this.selected_visitors = i\r\n            this.delete_dialog = true\r\n        },\r\n    }\r\n}\r\n\r\n\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visitors List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visitors List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Visitors List.vue?vue&type=template&id=705ea494&\"\nimport script from \"./Visitors List.vue?vue&type=script&lang=js&\"\nexport * from \"./Visitors List.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\r\nimport axios from 'axios';\r\nexport default {\r\n    \r\n        async createVisitors(params)  {\r\n            return await axios.post(`visitors/create` , params)\r\n        },\r\n        async createVisitorsAndCheck(params)  {\r\n            return await axios.post(`visitors/create_and_check` , params)\r\n        },\r\n        async createVisitorsList(params)  {\r\n            return await axios.post(`visitors/create/list` , params)\r\n        },\r\n        async updateVisitorsColumn(column , value , data)  {\r\n            return await axios.put(`visitors/update_list?${column}=${value}` , data)\r\n        },\r\n        async deleteVisitorsList(list)  {\r\n            return await axios.delete(`visitors/delete_list` , {\r\n                data: {\r\n                    list:list\r\n                }\r\n            })\r\n        },\r\n        async reportVisitors(column , value)  {\r\n            return await axios.get(`visitors/report?${column}=${value}`)\r\n        },\r\n        async getAllVisitors()  {\r\n            return await axios.get(`visitors/all`)\r\n        },\r\n        async getOneVisitors(visitor_id)  {\r\n            return await axios.get(`visitors/all/${visitor_id}`)\r\n        },\r\n        async getVisitorsByColumn(column , value)  {\r\n            return await axios.get(`visitors/filter?column=${column}&value=${value}`)\r\n        },\r\n        async deleteVisitors(visitor_id)  {\r\n            return await axios.delete(`visitors/delete/${visitor_id}`)\r\n        },\r\n        async updateVisitors(visitor_id , params)  {\r\n            return await axios.put(`visitors/update/${visitor_id}` , params)\r\n        },\r\n}\r\n        "],"sourceRoot":""}